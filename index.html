<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Naruto: Shinobi Training</title>
    <style>
        body { margin: 0; background: #87CEEB; color: white; font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; overflow: hidden; }
        
        #ui { padding: 15px; font-size: 26px; background: rgba(0,0,0,0.5); width: 100%; text-align: center; font-weight: bold; }

        /* ИГРОВАЯ ЗОНА */
        #game { 
            position: relative; 
            width: 800px; 
            height: 400px; 
            margin-top: 50px; 
            overflow: hidden; 
            cursor: pointer;
        }

        /* ПЛАТФОРМА (Передний план из твоей ссылки) */
        #platform {
            position: absolute;
            bottom: 0;
            width: 200%; /* Ширина для анимации прокрутки */
            height: 100px; /* Высота земли */
            background: url('https://i.ibb.co/tMZxQHh9/1691174693-grizly-club-p-kartinki-personazh-dlya-2d-igri-bez-fona-52.png') repeat-x;
            background-size: contain;
            animation: moveGround 5s linear infinite;
            z-index: 5;
        }

        @keyframes moveGround {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        /* ГЕРОЙ (Из твоей новой ссылки) */
        #player { 
            position: absolute; 
            width: 80px; 
            height: 80px; 
            bottom: 80px; /* Стоит на платформе */
            left: 100px; 
            background: url('https://i.ibb.co/fzZz7s95/1692279603-grizly-club-p-kartinki-igrok-dlya-2d-igri-bez-fona-36.png') no-repeat center; 
            background-size: contain; 
            z-index: 10;
        }

        /* СЮРИКЕН (Анимированный) */
        .shuriken { 
            position: absolute; 
            width: 40px; 
            height: 40px; 
            background: url('https://i.imgur.com/vHTh7jC.png') no-repeat center; 
            background-size: contain; 
            animation: spin 0.3s infinite linear; 
            z-index: 8;
        }

        @keyframes spin { 
            from { transform: rotate(0deg); } 
            to { transform: rotate(360deg); } 
        }

        /* ЭКРАНЫ */
        .overlay { 
            position: absolute; top: 0; left: 0; width: 100%; height: 100%; 
            background: rgba(0,0,0,0.8); display: none; flex-direction: column; 
            justify-content: center; align-items: center; z-index: 100; 
        }
        
        .btn { 
            padding: 15px 35px; background: #e67e22; border: 2px solid #fff; 
            color: white; cursor: pointer; border-radius: 10px; 
            font-weight: bold; font-size: 20px;
        }

    </style>
</head>
<body>

    <div id="ui">⏱️ ВРЕМЯ: <span id="timer">30</span>с</div>

    <div id="game" onclick="jump()">
        <div id="player"></div>
        <div id="platform"></div>
        
        <div id="over" class="overlay">
            <h1 style="color: #ff4d4d; font-size: 50px;">ПОРАЖЕНИЕ</h1>
            <button class="btn" onclick="location.reload()">ПОПРОБОВАТЬ СНОВА</button>
        </div>

        <div id="win" class="overlay">
            <h1 style="color: #2ecc71; font-size: 50px;">ПОБЕДА!</h1>
            <button class="btn" onclick="location.reload()">ИГРАТЬ ЕЩЕ РАЗ</button>
        </div>
    </div>

<script>
    let isJumping = false;
    let isGameOver = false;
    let timeLeft = 30;

    const timerEl = document.getElementById('timer');
    const player = document.getElementById('player');
    const game = document.getElementById('game');

    // Прыжок
    function jump() {
        if (isJumping || isGameOver) return;
        isJumping = true;
        let pos = 80; // Начальная высота на платформе
        let up = setInterval(() => {
            if (pos >= 240) {
                clearInterval(up);
                let down = setInterval(() => {
                    if (pos <= 80) { 
                        clearInterval(down); 
                        isJumping = false; 
                    }
                    pos -= 8; 
                    player.style.bottom = pos + 'px';
                }, 20);
            }
            pos += 10; 
            player.style.bottom = pos + 'px';
        }, 20);
    }

    // Создание сюрикенов
    function spawn() {
        if (isGameOver) return;
        const s = document.createElement('div');
        s.className = 'shuriken';
        let sx = 850;
        s.style.left = sx + 'px';
        // Либо летит низко (над землей), либо высоко (в прыжке)
        s.style.bottom = (Math.random() > 0.5 ? '90px' : '170px');
        game.appendChild(s);

        let move = setInterval(() => {
            if (isGameOver) { s.remove(); clearInterval(move); return; }
            sx -= 11;
            s.style.left = sx + 'px';

            if (sx < -50) {
                clearInterval(move);
                s.remove();
            }

            // Столкновение
            let pr = player.getBoundingClientRect();
            let sr = s.getBoundingClientRect();
            if (pr.right > sr.left+20 && pr.left < sr.right-20 && pr.bottom > sr.top+20 && pr.top < sr.bottom-20) {
                gameOver();
            }
        }, 20);
        setTimeout(spawn, 1200 + Math.random() * 1000);
    }

    function gameOver() {
        isGameOver = true;
        document.getElementById('over').style.display = 'flex';
        document.getElementById('platform').style.animationPlayState = 'paused';
    }

    // Таймер
    let clock = setInterval(() => {
        if (isGameOver) return;
        timeLeft--;
        timerEl.innerText = timeLeft;
        if (timeLeft <= 0) { 
            clearInterval(clock);
            isGameOver = true;
            document.getElementById('win').style.display = 'flex';
        }
    }, 1000);

    document.addEventListener('keydown', (e) => { if(e.code === 'Space') jump(); });
    spawn();
</script>
</body>
</html>
